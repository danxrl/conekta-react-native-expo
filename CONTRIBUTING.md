# Contributing

Contributions are always welcome, no matter how large or small!

We want this community to be friendly and respectful to each other. Please follow it in all your interactions with the project. Before contributing, please read the [code of conduct](./CODE_OF_CONDUCT.md).

## Development workflow

This repository contains:

- The library package at the root (published to npm as `conekta-react-native-expo`).
- An Expo example app in the `example/` directory that consumes the local library build.

To get started, ensure you are using the Node.js version specified in [`.nvmrc`](./.nvmrc), then install dependencies with npm:

```sh
npm install
```

The library build artifacts live under `build/` and are generated by [`expo-module-scripts`](https://github.com/expo/expo/tree/main/packages/expo-module-scripts). After installing, run:

```sh
npm run build
```

This compiles TypeScript sources and native module interfaces so the example app can consume your changes. Re-run `npm run build` whenever you modify files under `src/` or native code in `ios/` or `android/`.

The [example app](/example/) demonstrates how the module is consumed. Set it up separately:

```sh
cd example
npm install
```

The example depends on the local library (`"conekta-react-native-expo": "file:.."`), so rebuilding the library and restarting Metro is enough to validate most changes. For JavaScript-only edits, Metro hot reload will pick up changes after `npm run build`. Native Objective-C/Swift or Java/Kotlin updates require rebuilding the example app (`expo run:ios` / `expo run:android`).

Helpful commands from `example/`:

```sh
npm run start     # start Expo/Metro
npm run ios       # run on iOS simulator or device
npm run android   # run on Android emulator or device
```

When working on native code, you can open the platforms directly:

- iOS: open `example/ios/ConektaReactNativeExpoExample.xcworkspace` in Xcode (native sources live under `Pods > Development Pods > conekta-react-native-expo`).
- Android: open `example/android` in Android Studio (`conekta-react-native-expo` module).

### Quality checks

Before opening a pull request, make sure the project lints, tests, and builds:

```sh
npm run lint          # ESLint + Prettier integration
npm run lint:fix      # auto-fix lint issues when possible
npm run test          # Jest unit tests via expo-module-scripts
npm run build         # compile TypeScript and native interfaces
```

Please add or update tests when you introduce new features or fix bugs. If your change touches native code, include manual testing steps in the PR description.

### Commit message convention

We follow the [conventional commits specification](https://www.conventionalcommits.org/en) for our commit messages:

- `fix`: bug fixes, e.g. fix crash due to deprecated method.
- `feat`: new features, e.g. add new method to the module.
- `refactor`: code refactor, e.g. migrate from class components to hooks.
- `docs`: changes into documentation, e.g. add usage example for the module.
- `test`: adding or updating tests, e.g. add integration tests using detox.
- `chore`: tooling changes, e.g. change CI config.

Our pre-commit hooks verify that your commit message matches this format when committing.

### Linting and tests

[ESLint](https://eslint.org/), [Prettier](https://prettier.io/), [TypeScript](https://www.typescriptlang.org/)

We use [TypeScript](https://www.typescriptlang.org/) for type checking, [ESLint](https://eslint.org/) with [Prettier](https://prettier.io/) for linting and formatting the code, and [Jest](https://jestjs.io/) for testing.

Our pre-commit hooks verify that the linter and tests pass when committing.

### Publishing to npm

We publish the package via npm. Maintainers should ensure `npm run build` has been executed and the working tree is clean before running `npm publish --access public` (or the appropriate release workflow).

### Scripts

The `package.json` file contains various scripts for common tasks:

- `npm install`: install dependencies and prepare the library.
- `npm run build`: compile the module.
- `npm run lint`: lint files.
- `npm run lint:fix`: lint with auto-fixes.
- `npm run test`: run the Jest test suite.
- `npm run open:ios`: open the iOS workspace in Xcode.
- `npm run open:android`: open the Android project in Android Studio.

Example app scripts (run from `example/`):

- `npm run start`: start Metro.
- `npm run ios`: build and run on iOS.
- `npm run android`: build and run on Android.

### Sending a pull request

> **Working on your first pull request?** You can learn how from this _free_ series: [How to Contribute to an Open Source Project on GitHub](https://app.egghead.io/playlists/how-to-contribute-to-an-open-source-project-on-github).

When you're sending a pull request:

- Prefer small pull requests focused on one change.
- Verify that linters and tests are passing.
- Review the documentation to make sure it looks good.
- Follow the pull request template when opening a pull request.
- For pull requests that change the API or implementation, discuss with maintainers first by opening an issue.
